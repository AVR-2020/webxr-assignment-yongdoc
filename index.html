<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FP RVA INDIVIDU</title>
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
  
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
  <script src="https://unpkg.com/aframe-proxy-event-component/dist/aframe-proxy-event-component.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
  <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.2.1/firebase-app.min.js"></script>
  <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.2.1/firebase-database.min.js"></script>
  <script src="components/index.js"></script>
</head>
<body>
  <a-scene id="scene" firebase="" >
    <a-assets>
      <a-asset-item id="song" src="assets/sounds/lane_boy.mp3" response-type="arraybuffer"></a-asset-item>
      <a-asset-item id="gunshot1" src="assets/sounds/gunshot1.mp3" response-type="arraybuffer"></a-asset-item>
    </a-assets>

    <a-entity bullet="name: normal; speed: 10.0; poolSize: 20"
                geometry="primitive: sphere; radius: 0.05;"
                material="color: #fffa61;"></a-entity>

    <a-entity id="mainmenu" position="0 1.8 -3">
      <a-entity id="start_button"
        position="0 0.2 0"
        target_bullet
        geometry="primitive: box; depth:0.1 ;height:0.5 ;width: 2;"
        material="color: #000000; opacity: 0.6"
        proxy-event__playsong="event: die; to: #song_game; as: playsong"
        proxy-event__gamestart="event: die; to: #mainmenu; as gamestart">
        <a-entity id="start" text="value: START; color: white; anchor: left; width: 6; align: center;" position= "-3 0 0.06" opacity="1.0"></a-entity>
      </a-entity>
      <a-entity id="howtoplay_button"
      position="0 -0.4 0"
      target_bullet
      geometry="primitive: box; depth: 0.1; height: 0.5; width: 2"
      material="color: #000000; opacity: 0.6"
      proxy-event__howtoplay="event: die; to: #tutorial_overlay; as: openoverlay"
      >
        <a-entity id="howtoplay" text="value: HOW TO PLAY; color: white; anchor: left; width: 6; align: center;" position= "-3 0 0.06" opacity="1.0"></a-entity>
      </a-entity>
      <a-entity id="tutorial_overlay"
        position="0 0 0.2"
        geometry="primitive: box; depth:0.1 ;height: 2.5;width: 3;"
        material="color: #000000; opacity: 0.9"
        animation__open="property: visible; to: true; startEvents: openoverlay"
        animation__close="property: visible; to: false; startEvents: closeoverlay"
        visible="false"
      >
        <a-entity id="close_overlay"
          position="1.1 -1.0 0.2"
          target_bullet
          geometry="primitive: box; depth:0.01 ;height:0.2 ;width: 0.4;"
          material="color: #222222; opacity: 1.0"
          proxy-event__closeoverlay="event: die; to: #tutorial_overlay; as: closeoverlay"
        >
          <a-entity text="value: OK; color: white; anchor: left; width: 4; align: center;" position="-2 0 0.01"></a-entity>
        </a-entity>
      </a-entity>
    </a-entity>

    <a-entity id="right_gun"
      htc-vive-controls="hand: right;"
      oculus-touch-controls="hand: right; model: false;"
      proxy-event__shoot="event: triggerdown; to: #right_gun; as: shoot"
      proxy-event__shootsound="event: triggerdown; to: #sound_shoot_right; as: shoot"
      shooter="bulletTypes: normal; activeBulletType: normal">
      <a-entity id="right_usp" obj-model="obj: assets\objects\usp45.obj;" material="color: #111111" scale="0.05 0.05 0.05" rotation="0 -90 0" position="0 -0.15 0.1"></a-entity>
      <a-entity id="sound_shoot_right" sound="src: #gunshot1; poolSize: 10; on: shoot; volume: 1.0"></a-entity>
      <a-entity id="right_laser" light="type: spot; angle: 1" position="0 0 0" visible="false" in-vr></a-entity>
    </a-entity>

    <a-entity
      id="left_gun"
      htc-vive-controls="hand: left;"
      oculus-touch-controls="hand: left; model: false;"
      proxy-event__shoot="event: triggerdown; to: #left_gun; as: shoot"
      proxy-event__shootsound="event: triggerdown; to: #sound_shoot_left; as: shoot"
      shooter="bulletTypes: normal; activeBulletType: normal">
      <a-entity id="left_usp" obj-model="obj: assets\objects\usp45.obj" material="color: #111111" scale="0.05 0.05 0.05" rotation="0 -90 0" position="0 -0.15 0.1"></a-entity>
      <a-entity id="sound_shoot_left" sound="src: #gunshot1; poolSize: 10; on: shoot; volume: 1.0"></a-entity>
      <a-entity id="left_laser" light="type: spot; angle: 1" position="0 0 0" visible="false" in-vr></a-entity>
    </a-entity>

    <a-camera id="camera" shooter="bulletTypes: normal; activeBulletType: normal;" click-to-shoot wasd-controls-enabled="false">
      <a-entity id="fps_laser" light="type: spot; angle: 1" position="0 0 0" visible="true" in-vr></a-entity>
      <a-cylinder position="0 -0.75 0" scale="0.25 1.8 0.25"></a-cylinder>
      <a-entity id="health_display" text="value: HP: 3; color: white; anchor: left; width:1.5; align: center;" position= "-0.75 0.7 -1" resize-text in-vr visible="false"></a-entity>
      <a-entity id="score_display" text="value: Score: 0; color: white; anchor: left; width:1.5; align: center;" position= "-0.75 0.8 -1" resize-text in-vr visible="false"></a-entity>
    </a-camera>
    <a-entity id="song_game" sound="src: #song; volume: 0.15; loop: false; on: playsong; positional: false"></a-entity>
    
    <a-light type="ambient" material="color: #b0afc9"></a-light>
    <a-entity environment="preset: yavapai; dressingAmount: 100; skyColor: #0055ff; lighting: point; lightPosition: -1.2 1 -0.55; fog: 0.8;"></a-entity>
  </a-scene>
</body>
</html>